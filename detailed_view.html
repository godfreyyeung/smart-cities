<!doctype html>
<html lang="en">
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="js/jquery.csv-0.71.min.js"></script>
<script>
     google.load('visualization', '1', {packages: ['corechart', 'line']});
google.setOnLoadCallback(drawBasic);

//var opts = {sendMethod: 'auto'};
//var query = new google.visualization.Query('dailyData/deqAirQualityCombined-22.csv', opts);

function drawBasic() {

          $.get("dailyData/deqAirQualityCombined-28.csv", function(csvString) {
          //query.setQuery('select C, sum(B) group by C');

          // Send the query with a callback function.
          //query.send(handleQueryResponse);
           var arrayData = $.csv.toObjects(csvString);
        

          console.log(arrayData[7].minute);

            var data = new google.visualization.DataTable();



            data.addColumn('number', 'time');
            data.addColumn('number', 'NO2');


            data.addRows([
              [(Number(arrayData[0].hour)*60)+Number(arrayData[0].minute), Number(arrayData[0].nitrogen_oxides)],
              [(Number(arrayData[1].hour)*60)+Number(arrayData[1].minute), Number(arrayData[1].nitrogen_oxides)],
              [(Number(arrayData[2].hour)*60)+Number(arrayData[2].minute), Number(arrayData[2].nitrogen_oxides)]
            ]);

            var options = {
              hAxis: {
                title: 'Time'
              },
              vAxis: {
                title: 'NO2'
              }
            };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

            chart.draw(data, options);

        }, "text");
    }// end draw


    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html>